<app-employee-sub-header></app-employee-sub-header>
<div style="margin-left: 5%">
  <h1><b>Qualification</b></h1>
</div>

<div *ngIf="showTabs" class="modal-overlay">
  <div class="modal-dialog" (click)="preventClose($event)">
    <form class="modal-content">
      <form [formGroup]="validationForm" (ngSubmit)="onSubmit()">
        <button mat-icon-button (click)="toggleTabs()" class="close-icon">
          <i class="far fa-times-circle"></i>
        </button>
        <h2>Add Qualification</h2>

        <!-- First Row: Level and Institute -->
        <div class="row">
          <!-- Column for Level -->
          <div class="col-md-6 mb-3">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="text"
                id="form1"
                class="form-control"
                formControlName="levelName"
                required
              />
              <label mdbLabel class="form-label" for="form1"
                >Post-Secondary non-tertiary education
                <span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  levelNameControl?.invalid &&
                  (levelNameControl?.dirty || levelNameControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  levelNameControl?.valid &&
                  (levelNameControl?.dirty || levelNameControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>

          <!-- Column for Institute -->
          <div class="col-md-6 mb-3">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="text"
                id="form1"
                class="form-control"
                formControlName="instituteName"
                required
              />
              <label mdbLabel class="form-label" for="form1"
                >Institute <span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  instituteNameControl?.invalid &&
                  (instituteNameControl?.dirty || instituteNameControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  instituteNameControl?.valid &&
                  (instituteNameControl?.dirty || instituteNameControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>
        </div>

        <!-- Second Row: Major/Specialization, Year, GPA/Score -->
        <div class="row">
          <!-- Column for Major/Specialization -->
          <div class="col-md-4 mb-3">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="text"
                id="form1"
                class="form-control"
                formControlName="MajorName"
                required
              />
              <label mdbLabel class="form-label" for="form1"
                >Major/Specialization <span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  MajorNameControl?.invalid &&
                  (MajorNameControl?.dirty || MajorNameControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  MajorNameControl?.valid &&
                  (MajorNameControl?.dirty || MajorNameControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>

          <!-- Column for Year -->
          <div class="col-md-4 mb-3">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="text"
                id="form1"
                class="form-control"
                formControlName="yearName"
                required
              />
              <label mdbLabel class="form-label" for="form1"
                >Year <span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  yearNameControl?.invalid &&
                  (yearNameControl?.dirty || yearNameControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  yearNameControl?.valid &&
                  (yearNameControl?.dirty || yearNameControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>

          <!-- Column for GPA/Score -->
          <div class="col-md-4 mb-3">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="text"
                id="form1"
                class="form-control"
                formControlName="GPAName"
                required
              />
              <label mdbLabel class="form-label" for="form1"
                >GPA/Score <span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  GPANameControl?.invalid &&
                  (GPANameControl?.dirty || GPANameControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  GPANameControl?.valid &&
                  (GPANameControl?.dirty || GPANameControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>
        </div>

        <!-- Third Row: Start Date, End Date -->
        <div class="row">
          <!-- Column for Start Date -->
          <div class="col-md-6">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="date"
                id="startDate"
                class="form-control"
                formControlName="startDate"
              />
              <mdb-error
                *ngIf="
                  startDateControl?.invalid &&
                  (startDateControl?.dirty || startDateControl?.touched)
                "
              ></mdb-error>
              <label mdbLabel class="form-label" for="startDate"
                >Start Date <span class="text-danger">*</span></label
              >
            </mdb-form-control>
          </div>

          <!-- Column for End Date -->
          <div class="col-md-6">
            <mdb-form-control class="tex-tbox">
              <input
                mdbValidate
                mdbInput
                type="date"
                id="endDate"
                class="form-control"
                formControlName="endDate"
              />
              <mdb-error
                *ngIf="
                  endDateControl?.invalid &&
                  (endDateControl?.dirty || endDateControl?.touched)
                "
              ></mdb-error>
              <label mdbLabel class="form-label" for="endDate"
                >End Date <span class="text-danger">*</span></label
              >
            </mdb-form-control>
          </div>
        </div>
        <p></p>
        <div class="row">
          <div class="col-md-6">
            <mdb-form-control class="tex-tbox">
              <textarea
                mdbValidate
                mdbInput
                type="text"
                id="form3"
                rows="3"
                class="form-control"
                formControlName="Description"
              ></textarea>
              <label mdbLabel class="form-label" for="form3"
                >Description<span class="text-danger">*</span></label
              >
              <mdb-error
                *ngIf="
                  DescriptionControl?.invalid &&
                  (DescriptionControl?.dirty || DescriptionControl?.touched)
                "
              ></mdb-error>
              <mdb-success
                *ngIf="
                  DescriptionControl?.valid &&
                  (DescriptionControl?.dirty || DescriptionControl?.touched)
                "
              ></mdb-success>
            </mdb-form-control>
          </div>
          <div class="col-md-6">
            <mdb-form-control class="tex-tbox">
              <div class="upload-img">
                <input
                  type="file"
                  (change)="onFileSelected($event)"
                  accept="image/*"
                />
                <div *ngIf="imageUrl" class="image-container">
                  <img [src]="imageUrl" alt="Uploaded Image" />
                </div>
              </div>
            </mdb-form-control>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="row">
          <div class="col-md-12 text-center mt-2">
            <div mat-dialog-actions [align]="'end'" class="submit-dialog">
              <button mdbRipple type="submit" class="btn btn-info btn-sm">
                <i class="fas fa-save fa-fw me-2"></i>Save
              </button>
            </div>
          </div>
        </div>
      </form>
    </form>
  </div>
</div>

<div style="overflow: scroll">
  <div
    class="card"
    style="
      border: 1px solid lightgray;
      margin: 15px 14px;
      border-radius: 10px;
      overflow: scroll;
      height: 450px;
    "
  >
    <table class="table align-middle mb-0 bg-white" style="position: relative">
      <thead class="bg-light" style="position: sticky; top: 0px">
        <tr>
          <th>Id <i class="fa fa-arrow-up" aria-hidden="true"></i></th>
          <th>Qualification</th>
        </tr>
      </thead>
      <div
        class="round-button"
        style="position: fixed; top: 140px; right: 10px; width: 50px"
      >
        <button
          mat-fab
          extended
          (click)="toggleTabs()"
          matTooltip="Add Qualification"
          aria-label="Button that displays a tooltip in various positions"
          color="warn"
        >
          <i
            class="fas fa-plus fa-2x"
            style="color: rgba(10, 253, 253, 0.773)"
          ></i>
        </button>
      </div>
      <tbody>
        <tr *ngFor="let m of AttendanceEmployee">
          <td>{{ m.id }}</td>
          <td>{{ m.punch_in }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>